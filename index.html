<!DOCTYPE html>
<html>
<head>
    <title>Criar Usuário Teste</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <h2>Criar Usuário de Teste</h2>
    <button onclick="criarUsuarioTeste()">Criar Usuário Teste</button>
    <div id="resultado"></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBNe8ryLTnb-IJBzR9CCmJ9Ljg_lawzTtk",
            authDomain: "essencial-print-5a753.firebaseapp.com",
            projectId: "essencial-print-5a753",
            storageBucket: "essencial-print-5a753.firebasestorage.app",
            messagingSenderId: "544082416072",
            appId: "1:544082416072:web:85d3c8549b25158284f0fd"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        async function criarUsuarioTeste() {
            const resultado = document.getElementById('resultado');
            
            try {
                // 1. Criar no Authentication
                const userCredential = await auth.createUserWithEmailAndPassword(
                    'teste@essencialprint.com', // Email SIMPLES
                    'teste123' // Senha SIMPLES
                );
                
                const userId = userCredential.user.uid;
                
                // 2. Criar no Firestore
                await db.collection('usuarios').doc(userId).set({
                    nome: 'Usuário Teste',
                    email: 'teste@essencialprint.com',
                    tipo: 'funcionario',
                    cargo: 'Funcionário Teste',
                    departamento: 'TI',
                    cpf: '000.000.000-00',
                    dataCriacao: new Date().toISOString()
                });
                
                resultado.innerHTML = 
                    '<p style="color: green;">✅ USUÁRIO DE TESTE CRIADO!</p>' +
                    '<p><strong>Email:</strong> teste@essencialprint.com</p>' +
                    '<p><strong>Senha:</strong> teste123</p>' +
                    '<p><strong>UID:</strong> ' + userId + '</p>' +
                    '<p><strong>Use estas credenciais para testar o login!</strong></p>';
                
            } catch (error) {
                if (error.code === 'auth/email-already-in-use') {
                    resultado.innerHTML = 
                        '<p style="color: orange;">ℹ️ Usuário de teste já existe!</p>' +
                        '<p><strong>Email:</strong> teste@essencialprint.com</p>' +
                        '<p><strong>Senha:</strong> teste123</p>' +
                        '<p>Tente fazer login com estas credenciais.</p>';
                } else {
                    resultado.innerHTML = '<p style="color: red;">❌ Erro: ' + error.message + '</p>';
                }
            }
        }
        
        criarUsuarioTeste(); // Executar automaticamente
    </script>
</body>
</html>
