<!DOCTYPE html>
<html>
<head>
    <title>Verificar Usu√°rio</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <h2>Verificar Usu√°rios no Firestore</h2>
    <button onclick="verificarUsuarios()">Verificar Usu√°rios</button>
    <button onclick="criarUsuario()">Criar Usu√°rio Ana Silva</button>
    <div id="resultado"></div>

    <script>
        // COLE SUA CONFIGURA√á√ÉO REAL DO FIREBASE AQUI!
        const firebaseConfig = {
            apiKey: "AIzaSyB...", // SUA CHAVE AQUI
            authDomain: "essencial-print.firebaseapp.com",
            projectId: "essencial-print", 
            storageBucket: "essencial-print.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function verificarUsuarios() {
            try {
                const resultado = document.getElementById('resultado');
                resultado.innerHTML = '<p>üîç Verificando usu√°rios...</p>';
                
                const snapshot = await db.collection('usuarios').get();
                
                if (snapshot.empty) {
                    resultado.innerHTML = '<p style="color: orange;">‚ö†Ô∏è Nenhum usu√°rio encontrado na cole√ß√£o "usuarios"</p>';
                    return;
                }
                
                let html = '<h3>‚úÖ Usu√°rios encontrados:</h3>';
                snapshot.forEach(doc => {
                    const data = doc.data();
                    html += `
                        <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
                            <strong>ID:</strong> ${doc.id}<br>
                            <strong>Nome:</strong> ${data.nome || 'N√£o informado'}<br>
                            <strong>Email:</strong> ${data.email || 'N√£o informado'}<br>
                            <strong>Tipo:</strong> ${data.tipo || 'N√£o informado'}<br>
                            <strong>Cargo:</strong> ${data.cargo || 'N√£o informado'}<br>
                        </div>
                    `;
                });
                
                resultado.innerHTML = html;
                
            } catch (error) {
                document.getElementById('resultado').innerHTML = 
                    '<p style="color: red;">‚ùå Erro: ' + error.message + '</p>';
                console.error('Erro:', error);
            }
        }

        async function criarUsuario() {
            try {
                const resultado = document.getElementById('resultado');
                resultado.innerHTML = '<p>‚è≥ Criando usu√°rio...</p>';
                
                const usuarioRef = db.collection('usuarios').doc();
                
                await usuarioRef.set({
                    nome: 'Ana Silva',
                    email: 'essencial.contatoana@gmail.com',
                    tipo: 'funcionario',
                    cargo: 'Gerente',
                    departamento: 'Administrativo',
                    cpf: '123.456.789-00',
                    dataCriacao: new Date().toISOString()
                });
                
                resultado.innerHTML = 
                    '<p style="color: green;">‚úÖ Usu√°rio criado com sucesso!</p>' +
                    '<p>ID do documento: ' + usuarioRef.id + '</p>' +
                    '<p>Clique em "Verificar Usu√°rios" para confirmar.</p>';
                
                console.log('Usu√°rio criado com ID:', usuarioRef.id);
                
            } catch (error) {
                document.getElementById('resultado').innerHTML = 
                    '<p style="color: red;">‚ùå Erro: ' + error.message + '</p>';
                console.error('Erro:', error);
            }
        }

        // Testar conex√£o ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Firebase inicializado para verifica√ß√£o');
        });
    </script>
</body>
</html>
