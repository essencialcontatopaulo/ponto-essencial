<!DOCTYPE html>
<html>
<head>
    <title>Completar Usu√°rio</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <h2>Completar Dados do Usu√°rio</h2>
    <button onclick="completarUsuario()">Completar Dados</button>
    <button onclick="verificarUsuario()">Verificar Dados</button>
    <div id="resultado"></div>

    <script>
        // COLE SUA CONFIGURA√á√ÉO DO FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyB...",
            authDomain: "essencial-print.firebaseapp.com",
            projectId: "essencial-print",
            storageBucket: "essencial-print.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abcdef123456"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const usuarioId = 'LoI3szo9okMADStQYyvc'; // ID do seu documento

        async function completarUsuario() {
            try {
                const resultado = document.getElementById('resultado');
                resultado.innerHTML = '<p>‚è≥ Completando dados do usu√°rio...</p>';
                
                // Atualizar documento com campos faltantes
                await db.collection('usuarios').doc(usuarioId).update({
                    email: 'essencial.contatoana@gmail.com',
                    tipo: 'funcionario',
                    departamento: 'Administrativo'
                });
                
                resultado.innerHTML = 
                    '<p style="color: green;">‚úÖ Dados completados com sucesso!</p>' +
                    '<p>Campos adicionados: email, tipo, departamento</p>';
                
            } catch (error) {
                document.getElementById('resultado').innerHTML = 
                    '<p style="color: red;">‚ùå Erro: ' + error.message + '</p>';
            }
        }

        async function verificarUsuario() {
            try {
                const resultado = document.getElementById('resultado');
                resultado.innerHTML = '<p>üîç Verificando dados...</p>';
                
                const doc = await db.collection('usuarios').doc(usuarioId).get();
                
                if (!doc.exists) {
                    resultado.innerHTML = '<p style="color: red;">‚ùå Documento n√£o encontrado</p>';
                    return;
                }
                
                const data = doc.data();
                let html = '<h3>üìã Dados do Usu√°rio:</h3>';
                html += '<ul>';
                
                // Listar todos os campos
                for (const [campo, valor] of Object.entries(data)) {
                    html += `<li><strong>${campo}:</strong> ${valor}</li>`;
                }
                
                html += '</ul>';
                
                // Verificar campos obrigat√≥rios
                const camposObrigatorios = ['nome', 'email', 'tipo', 'cargo', 'departamento'];
                const camposFaltantes = camposObrigatorios.filter(campo => !data[campo]);
                
                if (camposFaltantes.length > 0) {
                    html += `<p style="color: orange;">‚ö†Ô∏è Campos faltantes: ${camposFaltantes.join(', ')}</p>`;
                } else {
                    html += '<p style="color: green;">‚úÖ Todos os campos obrigat√≥rios est√£o preenchidos!</p>';
                }
                
                resultado.innerHTML = html;
                
            } catch (error) {
                document.getElementById('resultado').innerHTML = 
                    '<p style="color: red;">‚ùå Erro: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
