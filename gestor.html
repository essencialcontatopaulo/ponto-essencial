<!-- REMOVA o script antigo e COLE este no in√≠cio do gestor.html: -->
<script>
    // Verifica√ß√£o de login - CORRIGIDO
    document.addEventListener('DOMContentLoaded', function() {
        console.log("üëë Verificando acesso do gestor...");
        
        // Verificar se usu√°rio est√° logado
        const usuarioJson = localStorage.getItem('ponto_user');
        
        if (!usuarioJson) {
            console.log("‚ùå Nenhum usu√°rio logado");
            alert('‚ö†Ô∏è Fa√ßa login para acessar esta √°rea!');
            window.location.href = 'index.html?v=' + Date.now();
            return;
        }
        
        try {
            const usuario = JSON.parse(usuarioJson);
            console.log("üìã Usu√°rio encontrado:", usuario);
            
            if (usuario.tipo !== 'gestor') {
                console.log("‚ùå Usu√°rio n√£o √© gestor:", usuario.tipo);
                alert('‚ùå Acesso restrito! Apenas gestores podem acessar esta √°rea.');
                window.location.href = 'index.html?v=' + Date.now();
                return;
            }
            
            // Se chegou aqui, √© gestor v√°lido
            console.log(`‚úÖ Gestor autorizado: ${usuario.nome}`);
            
            // Remover verifica√ß√µes antigas do localStorage
            localStorage.removeItem('gestor_logged_in');
            
        } catch (error) {
            console.error("‚ùå Erro ao verificar usu√°rio:", error);
            alert('‚ùå Erro ao verificar acesso. Fa√ßa login novamente.');
            window.location.href = 'index.html?v=' + Date.now();
        }
    });
</script>
