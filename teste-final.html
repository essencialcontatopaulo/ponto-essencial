<!DOCTYPE html>
<html>
<head>
    <title>Teste Final Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
    <h2>Teste Configura√ß√£o Nova</h2>
    <button onclick="testar()">Testar Login</button>
    <div id="resultado"></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBNe8ryLTnb-IJBzR9CCmJ9Ljg_lawzTtk",
            authDomain: "essencial-print-5a753.firebaseapp.com",
            projectId: "essencial-print-5a753",
            storageBucket: "essencial-print-5a753.firebasestorage.app",
            messagingSenderId: "544082416072",
            appId: "1:544082416072:web:85d3c8549b25158284f0fd"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        async function testar() {
            const resultado = document.getElementById('resultado');
            
            try {
                // 1. Criar usu√°rio (se n√£o existir)
                try {
                    await auth.createUserWithEmailAndPassword(
                        'essencial.contatona@gmail.com',
                        '202610Ana@'
                    );
                    resultado.innerHTML += '<p>‚úÖ Usu√°rio criado</p>';
                } catch (e) {
                    if (e.code === 'auth/email-already-in-use') {
                        resultado.innerHTML += '<p>‚ÑπÔ∏è Usu√°rio j√° existe</p>';
                    }
                }

                // 2. Fazer login
                const userCred = await auth.signInWithEmailAndPassword(
                    'essencial.contatona@gmail.com',
                    '202610Ana@'
                );
                
                resultado.innerHTML += 
                    `<p style="color: green; font-weight: bold;">üéâ LOGIN BEM-SUCEDIDO!</p>
                     <p>Email: ${userCred.user.email}</p>
                     <p>UID: ${userCred.user.uid}</p>`;
                
                // 3. Verificar token
                const token = await userCred.user.getIdToken();
                resultado.innerHTML += `<p>Token v√°lido: ${token ? '‚úÖ Sim' : '‚ùå N√£o'}</p>`;
                
            } catch (error) {
                resultado.innerHTML = 
                    `<p style="color: red;">‚ùå ERRO: ${error.message}</p>
                     <p>C√≥digo: ${error.code}</p>
                     <p>Config usada: ${firebaseConfig.projectId}</p>`;
            }
        }
    </script>
</body>
</html>
